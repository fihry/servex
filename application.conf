# ============================
# servux Configuration 
# ============================

# Global Settings
[global]
max_body_size = 1048576
timeout = 30
keep_alive = true

# Error Pages
[error_pages]
400 = ./error_pages/400.html
403 = ./error_pages/403.html
404 = ./error_pages/404.html
405 = ./error_pages/405.html
413 = ./error_pages/413.html
500 = ./error_pages/500.html

# Main Server (default)
[server:main]
host = localhost
ports = 8080,8081
default = true
root = ./www

# Main Server Routes
[route:main:root]
path = /
methods = GET
index = index.html
autoindex = false

[route:main:static]
path = /static
methods = GET
root = ./www/static
autoindex = false

[route:main:uploads]
path = /uploads
methods = GET,POST,DELETE
upload_dir = ./uploads
autoindex = true
max_file_size = 5242880

[route:main:api]
path = /api
methods = GET,POST,DELETE
cgi_extension = .py
cgi_executor = /usr/bin/python3

[route:main:cgi_bin]
path = /cgi-bin
methods = GET,POST
cgi_extension = .py
cgi_executor = /usr/bin/python3
root = ./www/cgi-bin

[route:main:old_redirect]
path = /old-path
redirect_status = 301
redirect_target = /new-path

[route:main:temp_redirect]
path = /temp
redirect_status = 302
redirect_target = https://example.com

# API Server
[server:api]
host = api.localhost
ports = 8082
default = false
root = ./api

[route:api:root]
path = /
methods = GET,POST,PUT,DELETE
cgi_extension = .py
cgi_executor = /usr/bin/python3

[route:api:health]
path = /health
methods = GET
index = health.html

# File Server
[server:files]
host = files.localhost
ports = 8083
default = false
root = ./files

[route:files:browse]
path = /
methods = GET
autoindex = true

[route:files:download]
path = /download
methods = GET
autoindex = true

# Session & Cookie Settings
[session]
enabled = true
timeout = 1800
cookie_name = LOCALSERVER_SESSION
secure = false
http_only = true
same_site = Lax

# Logging
[logging]
level = INFO
access_log = ./logs/access.log
error_log = ./logs/error.log

# Performance
[performance]
max_connections = 1000
buffer_size = 8192
poll_timeout = 100